<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="utf-8" />
    <title>SetlistGPT</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" th:href="@{/styles.css}" href="/styles.css" />
</head>
<body>
<header>
    <h1>SetlistGPT</h1>

    <!-- Admin button shown only for admins (Thymeleaf reads session attribute "profile") -->
    <button id="adminBtn" type="button" class="btn"
            th:if="${session.profile != null and session.profile.type == T(dk.ek.setlistgpt.profile.ProfileType).ADMIN}"
            onclick="window.location.href='/admin'">Admin</button>
</header>

<section id="publicView">
    <p class="meta">Choose an action below.</p>

    <!-- Home actions (default) -->
    <div class="actions" id="publicHomeActions">
        <button id="createProfileBtn" type="button">Create Profile</button>
        <button id="showLoginBtn" type="button">Login</button>
        <button id="seePublicBtn" type="button">See Public Repertoires &amp; Setlists</button>
    </div>

    <!-- Public browser (shown after See Public...) -->
    <div class="actions hidden" id="publicBrowseActions">
        <button id="publicRepertoiresBtn" type="button">Public Repertoires</button>
        <button id="publicSetlistsBtn" type="button">Public Setlists</button>
        <button id="backToPublicBtn" type="button">Back</button>
    </div>

    <div id="loginArea" class="hidden">
        <form id="loginForm" action="#" method="post" onsubmit="return false;">
            <label>Username <input id="username" type="text" autocomplete="username"></label>
            <label>Password <input id="password" type="password" autocomplete="current-password"></label>
            <button id="loginBtn" type="button">Sign in</button>
            <span class="meta" aria-live="polite"></span>
        </form>
    </div>

    <div id="publicStatus" class="meta" aria-live="polite"></div>
    <div id="publicResults"></div>
</section>

<section id="authView" class="hidden">
    <p class="meta">Choose an action below.</p>
    <div class="actions">
        <button id="newRepertoireBtn" type="button">New Repertoire</button>
        <button id="myRepertoiresBtn" type="button">My Repertoires</button>
        <button id="newSetlistBtn" type="button">New Setlist</button>
        <button id="setlistsBtn" type="button">My Setlists</button>
        <button id="logoutBtn" type="button">Logout</button>
    </div>
    <div id="contentArea"></div>
</section>

<footer>
    <p>&copy; SetlistGPT</p>
</footer>

<script defer src="/javascript/login-hotfix.js"></script>
<script defer src="/javascript/frontpage.js"></script>
<script th:src="@{/javascript/create-profile.js(v=3)}" src="/javascript/create-profile.js?v=3" defer></script>
</body>
</html>